#指定运行环境
language: node_js
#指定nodejs版本，可以指定多个
node_js:
  - lts/*

cache:
  directories:
    - node_modules
#运行的脚本命令
script:
  - vuepress build

after_script:
  - cd .vuepress/dist
  - ssh -T git@github.com
  - echo 'smalin.cn' > CNAME
  - git init
  - git config user.name smalin
  - git config user.email dinglin0020@gmail.com
  - git add .
  - git commit -m 'auto-deploy'
  - git push -f git@github.com:smalin0020/myBlog.git master:gh-pages

#指定分支，只有指定的分支提交时才会运行脚本
branches:
  only:
    - master