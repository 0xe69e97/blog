import{_ as a,c as s,e as n,o as t}from"./app-igEGucXV.js";const i="/images/posts/2021/BuildError1.png",p={};function o(c,e){return t(),s("div",null,[...e[0]||(e[0]=[n('<p>在公司的项目上在测试环境打包还没遇到过，但是通过公司的上线平台打包前端 JS 代码的时候，在打包日志下发现了构建失败的错误日志，具体报错信息可以看下图</p><p><img src="'+i+`" alt="打包报错"></p><p>报错信息大致为内存堆栈溢出</p><p>主要的原因是因为使用 <code>Node</code> 进行打包时，采用的 <code>V8</code> 引擎，在 <code>Node</code> 中通过 JavaScript 使用内存只能使用部分内存（64位系统下约为 1.4GB，32位系统下约为 0.7GB），这就是为什么我们在打包时会出现内存溢出的问题，主要还是因为默认分配的内存比较小，而我们的项目通常很大！并且 Webpack 在打包的时候也会十分的消耗资源，当超出了默认分配的大小就会出现上述的报错问题</p><p>那么如何去解决呢，其实非常简单，只需要在打包的时候分配一下 <code>Node</code> 可使用的内存大小即可</p><p>更改 <code>package.json</code> 下的 scripts 字段的打包命令即可</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ...其他配置</span></span>
<span class="line">  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --max_old_space_size=4096 build/build.js&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 其他配置...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其实这里更改的就是 <code>--max_old_space_size=4096</code> 通过这个来分配打包时的内存使用大小，然后重新打包即可，这个分配的单位为 MB ，也就是 4G 的内存使用。目前在我这里实验的项目打包速度快了 2 倍，而且还没再次遇到这个问题。</p><p>抬走，下一个。</p>`,9)])])}const r=a(p,[["render",o]]),d=JSON.parse('{"path":"/post/2021/07/14/build-error/","title":"解决前端打包出现内存溢出问题","lang":"zh-CN","frontmatter":{"title":"解决前端打包出现内存溢出问题","subtitle":"由于 Node 内存默认资源有限...","author":"离殊","date":"2021-07-14T00:00:00.000Z","useHeaderImage":true,"headerImage":"https://cdn.jsdelivr.net/gh/0xe69e97/image-PicX@master/games/Elden-Ring_004.2o2uy9mma340.webp","headerMask":"rgb(14, 21, 5, .4)","permalinkPattern":"/post/:year/:month/:day/:slug/","tags":["NodeJs"]},"git":{"updatedTime":1760173234000,"contributors":[{"name":"0xe69e97","username":"0xe69e97","email":"0xe69e97@gmail.com","commits":4,"url":"https://github.com/0xe69e97"}],"changelog":[{"hash":"8b50bf6141b1287f40e857d7ad53c66753a52b56","time":1760173234000,"email":"lishu@example.com","author":"0xe69e97","message":"feat: 完成文档升级"},{"hash":"4bfeafe7108a3396b1b0c74ab58d967396ca0f9f","time":1650297463000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 修改花名"},{"hash":"de4a7a5d9bed30a09e003480d75caeabd43473f7","time":1648797498000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 迁移图片到 CDN"},{"hash":"f0c39e30c97cfd90120f87e27235d25e52ed8b70","time":1648727890000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 迁移之前文章，添加首页背景图（魂1 ，魂3，血缘）"}]},"filePathRelative":"posts/2021/2021-07-14-build-error.md"}');export{r as comp,d as data};
