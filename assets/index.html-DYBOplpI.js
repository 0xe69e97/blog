import{_ as s,c as a,e,o as i}from"./app-igEGucXV.js";const l={};function p(t,n){return i(),a("div",null,[...n[0]||(n[0]=[e(`<p>这是一篇关于 Nginx 服务器端配置的记录</p><h2 id="nginx-安装-centos-7-并配置服务" tabindex="-1"><a class="header-anchor" href="#nginx-安装-centos-7-并配置服务"><span>nginx 安装（centOS 7）并配置服务</span></a></h2><h3 id="添加-yum-源" tabindex="-1"><a class="header-anchor" href="#添加-yum-源"><span>添加 yum 源</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">yum <span class="token function">install</span> nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="mac-安装-nginx" tabindex="-1"><a class="header-anchor" href="#mac-安装-nginx"><span>Mac 安装 Nginx</span></a></h2><p>首先在命令行输入 <code>nginx</code> 如果没有任何输出的话，代表你已经安装了 nginx 了</p><p>否则进行安装，直接使用 <code>brew</code> 进行安装</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">brew <span class="token function">install</span> nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>跑完之后可以在试一下是否安装成功</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>通过 brew 安装的 nginx 可以通过 <code>brew info nginx</code> 查看相关信息</p><p>或者通过 <code>nginx -V</code> 来查看相关信息</p></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">$ brew info nginx</span>
<span class="line"></span>
<span class="line">nginx: stable <span class="token number">1.17</span>.10 <span class="token punctuation">(</span>bottled<span class="token punctuation">)</span>, HEAD</span>
<span class="line">HTTP<span class="token punctuation">(</span>S<span class="token punctuation">)</span> server and reverse proxy, and IMAP/POP3 proxy server</span>
<span class="line">https://nginx.org/</span>
<span class="line">/usr/local/Cellar/nginx/1.17.10 <span class="token punctuation">(</span><span class="token number">25</span> files, <span class="token number">2</span>.1MB<span class="token punctuation">)</span> *</span>
<span class="line">  Poured from bottle on <span class="token number">2020</span>-10-10 at <span class="token number">15</span>:43:28</span>
<span class="line">From: https://mirrors.ustc.edu.cn/homebrew-core.git/Formula/nginx.rb</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Dependencies</span>
<span class="line">Required: openssl@1.1 ✔, pcre ✔</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Options</span>
<span class="line"><span class="token parameter variable">--HEAD</span></span>
<span class="line">	Install HEAD version</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Caveats</span>
<span class="line">Docroot is: /usr/local/var/www</span>
<span class="line"></span>
<span class="line">The default port has been <span class="token builtin class-name">set</span> <span class="token keyword">in</span> /usr/local/etc/nginx/nginx.conf to <span class="token number">8080</span> so that</span>
<span class="line">nginx can run without sudo.</span>
<span class="line"></span>
<span class="line">nginx will load all files <span class="token keyword">in</span> /usr/local/etc/nginx/servers/.</span>
<span class="line"></span>
<span class="line">To have launchd start nginx now and restart at login:</span>
<span class="line">  brew services start nginx</span>
<span class="line">Or, <span class="token keyword">if</span> you don&#39;t want/need a background <span class="token function">service</span> you can just run:</span>
<span class="line">  nginx</span>
<span class="line"><span class="token operator">==</span><span class="token operator">&gt;</span> Analytics</span>
<span class="line">install: <span class="token number">32,211</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span>, <span class="token number">102,881</span> <span class="token punctuation">(</span><span class="token number">90</span> days<span class="token punctuation">)</span>, <span class="token number">409,451</span> <span class="token punctuation">(</span><span class="token number">365</span> days<span class="token punctuation">)</span></span>
<span class="line">install-on-request: <span class="token number">31,621</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span>, <span class="token number">100,926</span> <span class="token punctuation">(</span><span class="token number">90</span> days<span class="token punctuation">)</span>, <span class="token number">397,605</span> <span class="token punctuation">(</span><span class="token number">365</span> days<span class="token punctuation">)</span></span>
<span class="line">build-error: <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">30</span> days<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">$ nginx <span class="token parameter variable">-V</span></span>
<span class="line"></span>
<span class="line">nginx version: nginx/1.17.10</span>
<span class="line">built by clang <span class="token number">11.0</span>.3 <span class="token punctuation">(</span>clang-1103.0.32.29<span class="token punctuation">)</span></span>
<span class="line">built with OpenSSL <span class="token number">1.1</span>.1f  <span class="token number">31</span> Mar <span class="token number">2020</span> <span class="token punctuation">(</span>running with OpenSSL <span class="token number">1.1</span>.1g  <span class="token number">21</span> Apr <span class="token number">2020</span><span class="token punctuation">)</span></span>
<span class="line">TLS SNI support enabled</span>
<span class="line">configure arguments: <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/Cellar/nginx/1.17.10 --sbin-path<span class="token operator">=</span>/usr/local/Cellar/nginx/1.17.10/bin/nginx --with-cc-opt<span class="token operator">=</span><span class="token string">&#39;-I/usr/local/opt/pcre/include -I/usr/local/opt/openssl@1.1/include&#39;</span> --with-ld-opt<span class="token operator">=</span><span class="token string">&#39;-L/usr/local/opt/pcre/lib -L/usr/local/opt/openssl@1.1/lib&#39;</span> --conf-path<span class="token operator">=</span>/usr/local/etc/nginx/nginx.conf --pid-path<span class="token operator">=</span>/usr/local/var/run/nginx.pid --lock-path<span class="token operator">=</span>/usr/local/var/run/nginx.lock --http-client-body-temp-path<span class="token operator">=</span>/usr/local/var/run/nginx/client_body_temp --http-proxy-temp-path<span class="token operator">=</span>/usr/local/var/run/nginx/proxy_temp --http-fastcgi-temp-path<span class="token operator">=</span>/usr/local/var/run/nginx/fastcgi_temp --http-uwsgi-temp-path<span class="token operator">=</span>/usr/local/var/run/nginx/uwsgi_temp --http-scgi-temp-path<span class="token operator">=</span>/usr/local/var/run/nginx/scgi_temp --http-log-path<span class="token operator">=</span>/usr/local/var/log/nginx/access.log --error-log-path<span class="token operator">=</span>/usr/local/var/log/nginx/error.log --with-compat --with-debug --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-ipv6 --with-mail --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mac-下-nginx-默认位置" tabindex="-1"><a class="header-anchor" href="#mac-下-nginx-默认位置"><span>Mac 下 Nginx 默认位置</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">/usr/local/etc/nginx/nginx.conf （配置文件路径）</span>
<span class="line">/usr/local/var/www （静态文件路径）</span>
<span class="line">/usr/local/Cellar/nginx/<span class="token punctuation">[</span>version<span class="token punctuation">]</span> （安装路径？）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>可以直接访问 http://localhost:8080 来访问 Nginx 开启的服务</p></div><h3 id="打开防火墙端口并重启" tabindex="-1"><a class="header-anchor" href="#打开防火墙端口并重启"><span>打开防火墙端口并重启</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public <span class="token parameter variable">--permanent</span> --add-service<span class="token operator">=</span>http</span>
<span class="line">firewall-cmd <span class="token parameter variable">--reload</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看防火墙打开的所有服务" tabindex="-1"><a class="header-anchor" href="#查看防火墙打开的所有服务"><span>查看防火墙打开的所有服务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">firewall-cmd --list-service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查看当前打开的端口" tabindex="-1"><a class="header-anchor" href="#查看当前打开的端口"><span>查看当前打开的端口</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="打开指定端口" tabindex="-1"><a class="header-anchor" href="#打开指定端口"><span>打开指定端口</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp</span>
<span class="line"><span class="token comment"># (永久生效再加上 --permanent)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>–zone 作用域</p><p>–add-port=8080/tcp 添加端口，格式为：端口/通讯协议</p><p>–permanent #永久生效，没有此参数重启后失效</p></div><h2 id="解决-nginx-403-错误问题" tabindex="-1"><a class="header-anchor" href="#解决-nginx-403-错误问题"><span>解决 nginx 403 错误问题</span></a></h2><p>第一种情况： 在你的 nginx 配置文件下的 root 字段的路径下没有找到 index.html</p><p>第二种情况： 没有用 root 用户运行，导致权限不足，也可以通过将文件夹权限提升再试</p><h2 id="nginx部署前端spa应用实践" tabindex="-1"><a class="header-anchor" href="#nginx部署前端spa应用实践"><span>nginx部署前端SPA应用实践</span></a></h2><h3 id="nginx-location-匹配规则" tabindex="-1"><a class="header-anchor" href="#nginx-location-匹配规则"><span>nginx location 匹配规则</span></a></h3><ul><li>~ 波浪线表示执行一个正则匹配，区分大小写</li><li>~* 表示执行一个正则匹配，不区分大小写</li><li>^~ 表示普通字符匹配，如果该选项匹配，只匹配该选项，不匹配别的选项，一般用来匹配目录</li><li>= 进行普通字符精确匹配</li><li>@ 定义一个命名的 location，使用在内部定向时，例如 error_page, try_files</li></ul><h3 id="browserhistory-模式的刷新问题" tabindex="-1"><a class="header-anchor" href="#browserhistory-模式的刷新问题"><span>browserHistory 模式的刷新问题</span></a></h3><p>browserHistory 路由模式下，使用history api可以在前端进行页面跳转，但是刷新的话，就需要对链接进行一个修复（重定向） 可以使用 nginx 的 <code>try_files</code></p><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf"><pre><code class="language-conf"><span class="line">location / {</span>
<span class="line">        root   /root/deploy/shenyang_military_general_app;</span>
<span class="line">        index  index.html index.htm;</span>
<span class="line">      	try_files $uri $uri/ /index.html;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="开启-gzip-压缩" tabindex="-1"><a class="header-anchor" href="#开启-gzip-压缩"><span>开启 gzip 压缩</span></a></h2><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf"><pre><code class="language-conf"><span class="line">gzip  on;</span>
<span class="line">gzip_types    text/plain application/javascript application/x-javascript text/javascript text/xml text/css;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>配置gzip_static</p><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf"><pre><code class="language-conf"><span class="line">gzip_static on;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,39)])])}const c=s(l,[["render",p]]),o=JSON.parse('{"path":"/post/2019/05/12/nginx-config/","title":"Nginx 服务器端配置","lang":"zh-CN","frontmatter":{"title":"Nginx 服务器端配置","subtitle":"一些简单的基本配置，解决遇到的问题～","author":"离殊","date":"2019-05-12T00:00:00.000Z","useHeaderImage":true,"headerImage":"/images/posts/2019/nginx.jpeg","headerMask":"rgb(14, 21, 5, .2)","permalinkPattern":"/post/:year/:month/:day/:slug/","tags":["Linux"]},"git":{"updatedTime":1760173234000,"contributors":[{"name":"0xe69e97","username":"0xe69e97","email":"0xe69e97@gmail.com","commits":3,"url":"https://github.com/0xe69e97"}],"changelog":[{"hash":"8b50bf6141b1287f40e857d7ad53c66753a52b56","time":1760173234000,"email":"lishu@example.com","author":"0xe69e97","message":"feat: 完成文档升级"},{"hash":"4bfeafe7108a3396b1b0c74ab58d967396ca0f9f","time":1650297463000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 修改花名"},{"hash":"7be2b2fa48553de52111009313a67a45884503db","time":1648733183000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 继续迁移之前文章"}]},"filePathRelative":"posts/2019/2019-05-12-nginx-config.md"}');export{c as comp,o as data};
