import{_ as a,c as e,e as n,o as i}from"./app-igEGucXV.js";const t="/images/posts/2020/shadowsocks.jpeg",l="/images/posts/2020/shadowsocks1.jpeg",o="/images/posts/2020/shadowsocks2.jpeg",r="/images/posts/2020/shadowsocks3.jpeg",c="/images/posts/2020/shadowsocks4.jpeg",p="/images/posts/2020/shadowsocks5.jpeg",d="/images/posts/2020/shadowsocks6.jpeg",h="/images/posts/2020/shadowsocks7.jpeg",m={};function u(g,s){return i(),e("div",null,[...s[0]||(s[0]=[n(`<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>本文只记录一下在搭建科学服务器的配置，对应的海外服务器地址购买推荐使用 <a href="https://www.vultr.com/" target="_blank" rel="noopener noreferrer">Vultr</a>，本文也是基于 <a href="https://www.vultr.com/" target="_blank" rel="noopener noreferrer">Vultr</a> 的 Ubuntu 服务器进行搭建，版本为 20.04 x64，地区推荐日本，因为离我们比较近，网速比较快</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>科学上网是为了工作、学习、娱乐和提高网络生活质量，请勿违反法律法规，发布违反国家相关法律法规及「九不准」管理规定的信息，如：</p><ul><li>反对宪法所确定的基本原则危害国家安全；</li><li>泄露国家秘密，颠覆国家政权，破坏国家统一；</li><li>损害国家荣誉和利益；</li><li>煽动民族仇恨、民族歧视，破坏民族团结；</li><li>侮辱、滥用英烈形象，否定英烈事迹，美化粉饰侵略战争行为的；</li><li>破坏国家宗教政策，宣扬邪教和封建迷信；</li><li>散布谣言，扰乱社会秩序，破坏社会稳定；</li><li>宣扬淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪；</li><li>煽动非法集会、结社、游行、示威、聚众扰乱社会秩序；</li><li>诽谤他人，泄露他人隐私，侵害他人合法权益；</li><li>含有法律、行政法规禁止的其他内容的信息；</li></ul></div><h2 id="vultr" tabindex="-1"><a class="header-anchor" href="#vultr"><span>Vultr</span></a></h2><p><a href="https://www.vultr.com/?ref=8581647-6G" target="_blank" rel="noopener noreferrer">推荐链接</a></p><p>会给你 100 美刀的试用，应该是一个月的有效期，可以多搭建几个梯子来试试哪个比较快，一般国内就是日本的速度比较快了，目前我是使用的日本服务器</p><h2 id="安装服务端-shadowsocks" tabindex="-1"><a class="header-anchor" href="#安装服务端-shadowsocks"><span>安装服务端 Shadowsocks</span></a></h2><p>买完服务器以后就可以通过 SSH 来进行远程登录了，我们直接开始安装服务端 shadowscoks</p><p>三行命令，一次输入一行，完成之后输入下一行</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">wget</span> --no-check-certificate <span class="token parameter variable">-O</span> shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</span>
<span class="line"><span class="token function">chmod</span> +x shadowsocks-all.sh</span>
<span class="line">./shadowsocks-all.sh <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">tee</span> shadowsocks-all.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意 由于上面的被和谐失效了，所以更换了安装源</p></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">wget</span> --no-check-certificate https://raw.githubusercontent.com/Yuk1n0/Shadowsocks-Install/master/shadowsocks.sh</span>
<span class="line"><span class="token function">chmod</span> +x shadowsocks.sh</span>
<span class="line">./shadowsocks.sh <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">tee</span> shadowsocks.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后一步输完，你应该会看到下图中内容──是要你选择需要安装的Shadowsocks版本。这里选择 4) shadowsocks-libev</p><p><img src="`+t+'" alt="shadowsocks"></p><p>选择完成后会让你输入密码，默认为一个随机密码，你可以回车选择默认，或者自定义一个密码后回车</p><p><img src="'+l+'" alt="shadowsocks"></p><p>密码设置完成后会让你输入一个端口号，默认随机一个，你也可以自定义一个端口号后回车生成</p><p><img src="'+o+'" alt="shadowsocks"></p><p>端口号设置完成后，选择一个加密方式，我一般采用 chacha20 来作为加密方式，手机上也是有这个模式的，比较方便，你也可以根据自己的喜好来选择不同的加密方式</p><p><img src="'+r+'" alt="shadowsocks"></p><p>设置完成后，会提示你是否需要安装 simple-obfs。这是 ss 的一个插件工具，可以起到混淆的作用，防止IP和端口被嗅探到，建议选 y 安装。</p><p><img src="'+c+'" alt="shadowsocks"></p><p>如果上一步选择了 y ，这里可以选择一种混淆方式。通常 TLS 要比 HTTP 的混淆效果更好，所以选 TLS</p><p><img src="'+p+'" alt="shadowsocks"></p><p>之后就耐心等待安装完成吧，安装完成后会给出你设置的密码、端口、服务器信息配置等，大功告成</p><p><img src="'+d+`" alt="shadowsocks"></p><p>记住红色的内容，也就是服务器IP、服务器ss端口、你设的密码、混淆方式和加密方式。</p><h2 id="检查和配置-shadowsocks" tabindex="-1"><a class="header-anchor" href="#检查和配置-shadowsocks"><span>检查和配置 Shadowsocks</span></a></h2><p>查看是否开始运行</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">/etc/init.d/shadowsocks-libev status</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果出现类似 <code>Shadowsocks-libev is running...</code> 的字样，说明已经开始正常运行了。</p><p>修改相关配置</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">vim</span> /etc/shadowsocks-libev/config.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="暴露端口" tabindex="-1"><a class="header-anchor" href="#暴露端口"><span>暴露端口</span></a></h2><p>如果此时还是无法通过客户端连接的话，可能是服务器端口未对外开放</p><p>如果是类似阿里云，腾讯云的服务器，也还需要在设置里面将端口放开</p><ol><li>添加指定需要开放的端口</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">firewall-cmd --add-port=8091/tcp --permanent</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>重载入添加的端口</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">firewall-cmd --reload</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>查询指定端口是否开启成功</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">firewall-cmd --query-port=8091/tcp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="安装客户端-shadowsocks" tabindex="-1"><a class="header-anchor" href="#安装客户端-shadowsocks"><span>安装客户端 Shadowsocks</span></a></h2><p>相比服务器端的安装，客户端的安装就简单了许多。首先，在<a href="https://shadowsocks.org/en/download/clients.html" target="_blank" rel="noopener noreferrer">这个页面</a>找到并下载自己操作系统对应的客户端。</p><p>打开客户端，在「服务器设定」里新增服务器。然后依次填入服务器IP、服务器端口、你设的密码和加密方式。</p><p><img src="`+h+`" alt="shadowsocks"></p><h2 id="开启-bbr-加速" tabindex="-1"><a class="header-anchor" href="#开启-bbr-加速"><span>开启 BBR 加速</span></a></h2><p>一键安装脚本</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">wget</span> --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x bbr.sh <span class="token operator">&amp;&amp;</span> ./bbr.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>完成后根据提示重启，如果没有则不需要，查看是否正在运行</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">uname</span> <span class="token parameter variable">-r</span></span>
<span class="line">lsmod <span class="token operator">|</span> <span class="token function">grep</span> bbr</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>至此就安装好了 Shadowsocks，可以愉快的学习了～</p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接"><span>参考链接</span></a></h2><p><a href="https://zoomyale.com/2016/vultr_and_ss/" target="_blank" rel="noopener noreferrer">科学上网的终极姿势，在Vultr VPS上搭建Shadowsocks</a>: 详细的介绍了原理，搭建，以及对应的解释和额外的一些内容，可以看看</p>`,54)])])}const k=a(m,[["render",u]]),v=JSON.parse('{"path":"/post/2020/10/16/shadowsocks/","title":"科学上网，在 Vultr VPS 上搭建 Shadowsocks","lang":"zh-CN","frontmatter":{"title":"科学上网，在 Vultr VPS 上搭建 Shadowsocks","subtitle":"为了工作、学习、娱乐和提高网络生活质量。大家要遵纪守法哦～","author":"离殊","date":"2020-10-16T00:00:00.000Z","useHeaderImage":true,"headerImage":"https://cdn.jsdelivr.net/gh/0xe69e97/image-PicX@master/games/Dark-Souls_003.295xohghnxs0.webp","headerMask":"rgb(14, 21, 5, .2)","permalinkPattern":"/post/:year/:month/:day/:slug/","tags":["Linux"]},"git":{"updatedTime":1760173234000,"contributors":[{"name":"0xe69e97","username":"0xe69e97","email":"0xe69e97@gmail.com","commits":5,"url":"https://github.com/0xe69e97"}],"changelog":[{"hash":"8b50bf6141b1287f40e857d7ad53c66753a52b56","time":1760173234000,"email":"lishu@example.com","author":"0xe69e97","message":"feat: 完成文档升级"},{"hash":"42dc7c5b1a45e53ff5eda7822c1bb599dacb713b","time":1661049474000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"docs: 添加梯子对外开放端口"},{"hash":"4bfeafe7108a3396b1b0c74ab58d967396ca0f9f","time":1650297463000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 修改花名"},{"hash":"1885884239947f96cb9887bc4137ae1ab8ff2236","time":1648797886000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 图片的 CDN 处理"},{"hash":"7be2b2fa48553de52111009313a67a45884503db","time":1648733183000,"email":"0xe69e97@gmail.com","author":"0xe69e97","message":"feat: 继续迁移之前文章"}]},"filePathRelative":"posts/2020/2020-10-16-shadowsocks.md"}');export{k as comp,v as data};
